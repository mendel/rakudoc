#! /usr/bin/env raku

use Rakudoc::CMD :MAIN;
my %*SUB-MAIN-OPTS = :named-anywhere;

# To have 'rakudoc rakudoc' work naturally, the main Pod is here; in order
# to keep all the 'multi MAIN' subs in Rakudoc::CMD, here's essentially a
# global variable giving access to USAGE(). Perhaps in the future a simpler
# mechanism can be devised.
my &*USAGE = &USAGE;
sub USAGE(Bool :$okay) {
    say $*USAGE;

    require Pod::To::Text;
    say "\n", ::("Pod::To::Text").render($=pod);
    exit 2 unless $okay;
}


=begin pod

=head1 NAME

B<rakudoc> - Read Raku documentation

=head1 SYNOPSIS

    rakudoc List
    rakudoc List.reduce
    rakudoc .reduce

=head1 ENVIRONMENT

C<RAKUDOC> is a comma-separated list of directories to search

=head1 SEE ALSO

Documentable
https://docs.raku.org/

=end pod
